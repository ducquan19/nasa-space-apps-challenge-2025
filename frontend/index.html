<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Weather Risk Assessment</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"
    />
    <!-- V·∫Ω b·∫£n ƒë·ªì -->
    <script
      src="https://cdn.plot.ly/plotly-latest.min.js"
      charset="utf-8"
    ></script>
    <!-- V·∫Ω bi·ªÉu ƒë·ªì -->
  </head>
  <body>
    <header class="topbar" role="banner">
      <!-- Left: brand -->
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>Rainbow Cloud</h1>
          <p style="width: 20vw">
            A smart website for improving our understanding of weather
          </p>
        </div>
      </div>

      <!-- Right: search form -->
      <div class="search-area">
        <form class="search-form" role="search" aria-label="Search location">
          <div class="input-wrap">
            <!-- Search icon -->
            <svg
              class="search-icon"
              viewBox="0 0 24 24"
              fill="none"
              aria-hidden="true"
            >
              <path
                d="M11 19a8 8 0 1 1 5.293-14.293A8 8 0 0 1 11 19z"
                stroke="currentColor"
                stroke-width="1.6"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M21 21l-4.35-4.35"
                stroke="currentColor"
                stroke-width="1.6"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>

            <input
              id="locationInput"
              class="search-input"
              type="search"
              name="location"
              placeholder="Enter your location"
              aria-label="Enter your location"
              autocomplete="off"
            />
          </div>

          <!-- Map button icon -->
          <button
            type="button"
            class="map-btn"
            id="openMapBtn"
            aria-label="Open map"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              aria-hidden="true"
            >
              <path
                d="M12 2C8.686 2 6 4.686 6 8c0 4.667 6 12 6 12s6-7.333 6-12c0-3.314-2.686-6-6-6z"
                stroke="currentColor"
                stroke-width="1.4"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <circle
                cx="12"
                cy="8"
                r="2.2"
                stroke="currentColor"
                stroke-width="1.4"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>

          <!-- Start Date -->
          <div class="input-wrap">
            <!-- <label for="startDate" class="date-label">Start</label> -->
            <input
              id="startDate"
              class="search-input date-input"
              type="date"
              name="start-date"
              aria-label="Start date"
            />
          </div>

          <!-- End Date -->
          <div class="input-wrap">
            <!-- <label for="startDate" class="date-label">End</label> -->
            <input
              id="endDate"
              class="search-input date-input"
              type="date"
              name="end-date"
              aria-label="End date"
            />
          </div>

          <!-- Activity -->
          <div class="input-wrap">
            <select
              id="activitySelect"
              class="search-select"
              name="activity"
              aria-label="Select activity"
            >
              <option value="none" selected>Activity</option>
              <option value="hiking">Hiking</option>
              <option value="cycling">Cycling</option>
              <option value="swimming">Swimming</option>
              <option value="camping">Camping</option>
            </select>
          </div>

          <!-- Get Weather Button -->
          <button
            type="submit"
            class="get-weather-btn"
            onclick="getForecastByModel()"
          >
            Get Weather
          </button>
        </form>
      </div>
    </header>

    <!-- Main dashboard container -->
    <main id="main">
      <!-- Left: dashboard -->
      <div id="info" class="sunny">
        <div
          style="
            display: flex;
            gap: 20px;
            align-items: center;
            padding-left: 20px;
          "
        >
          <h2 id="location_name"></h2>
          <div id="elevation">Leviation:</div>
          <div id="climate_type">Climate type:</div>

          <!-- Popup modal cho kh√≠ h·∫≠u -->
          <div id="climate_modal" class="modal">
            <div class="modal-content">
              <span class="close">&times;</span>
              <h2 id="climate_title"></h2>
              <div class="modal-body">
                <!-- VƒÉn b·∫£n -->
                <div class="modal-text">
                  <div id="climate_description"></div>
                </div>

                <!-- H√¨nh ·∫£nh -->
                <div class="modal-image">
                  <img id="img1" src="" alt="·∫¢nh 1" />
                  <img id="img2" src="" alt="·∫¢nh 2" />
                  <img id="img3" src="" alt="·∫¢nh 3" />
                  <img id="img4" src="" alt="·∫¢nh 4" />
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Block tr√™n -->
        <div
          id="top_info"
          style="
            display: flex;
            gap: 20px;
            align-items: center;
            margin-bottom: 20px;
          "
        >
          <img
            id="weather_icon"
            src=""
            alt="Weather Icon"
            style="width: 80px; height: 80px"
          />
          <div>
            <h1 id="temperature" style="margin: 0; font-size: 2.5rem"></h1>
            <div id="weather_desc" style="font-size: 1.2rem; color: #555"></div>
            <div id="feels_like" style="font-size: 1rem; color: #777"></div>
          </div>
          <!-- Recommend -->
          <div id="recommend">
            <p>Recommendation s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y...</p>
          </div>
        </div>

        <!-- Block d∆∞·ªõi -->
        <div
          id="details_grid"
          style="
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
          "
        >
          <div
            class="grid_item"
            style="
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 10px;
              text-align: left;
            "
          >
            <div>üå°Ô∏è Temperature</div>
            <div id="temp_range"></div>
          </div>

          <div
            class="grid_item"
            style="
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 10px;
              text-align: left;
            "
          >
            <div>üíß Humidity</div>
            <div id="humidity_value"></div>
            <div
              style="
                background: #eee;
                height: 8px;
                border-radius: 4px;
                margin-top: 4px;
              "
            >
              <div
                id="humidity_bar"
                style="
                  height: 100%;
                  background: #4da6ff;
                  border-radius: 4px;
                  width: 0%;
                "
              ></div>
            </div>
          </div>

          <div
            class="grid_item"
            style="
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 10px;
              text-align: left;
            "
          >
            <div>üå¨Ô∏è Wind</div>
            <div id="wind_value"></div>
          </div>

          <div
            class="grid_item"
            style="
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 10px;
              text-align: left;
            "
          >
            <div>‚òî Precipitation</div>
            <div id="precip_value">0 mm</div>
          </div>

          <div
            class="grid_item"
            style="
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 10px;
              text-align: left;
            "
          >
            <div>‚òÄÔ∏è UV Index</div>
            <div id="uv_index">Moderate</div>
          </div>

          <div
            class="grid_item"
            style="
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 10px;
              text-align: left;
            "
          >
            <div>üòä Comfort</div>
            <div
              style="
                display: flex;
                justify-content: left;
                gap: 4px;
                margin-top: 6px;
              "
            >
              <div
                class="comfort_bar"
                style="
                  width: 20px;
                  height: 20px;
                  background: #ddd;
                  border-radius: 4px;
                "
              ></div>
              <div
                class="comfort_bar"
                style="
                  width: 20px;
                  height: 20px;
                  background: #ddd;
                  border-radius: 4px;
                "
              ></div>
              <div
                class="comfort_bar"
                style="
                  width: 20px;
                  height: 20px;
                  background: #ddd;
                  border-radius: 4px;
                "
              ></div>
              <div
                class="comfort_bar"
                style="
                  width: 20px;
                  height: 20px;
                  background: #ddd;
                  border-radius: 4px;
                "
              ></div>
              <div
                class="comfort_bar"
                style="
                  width: 20px;
                  height: 20px;
                  background: #ddd;
                  border-radius: 4px;
                "
              ></div>
            </div>
          </div>
        </div>

        <!-- Options -->
        <div class="weather-controls" aria-label="Weather view selector">
          <button class="btn btn--primary" data-target="ten-days">
            Future Weather
          </button>
          <button class="btn btn--hourly" data-target="hourly">
            Hourly Weather
          </button>
          <button class="btn btn--planning" data-target="planning">
            For planning
          </button>
          <button class="btn btn--self" data-target="self">
            Self forecasting
          </button>
        </div>
      </div>

      <!-- Right: map -->
      <div id="mapWrapper">
        <div id="map"></div>
        <!-- <iframe
          id="id_apimaps_iframe"
          style="width: 100%; height: calc(100vh - 58px); border: none"
          src="https://vn2000.vn/map"
        ></iframe> -->
      </div>
    </main>

    <!-- Leaflet + GeoRaster libs for map -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/geotiff/dist/geotiff.browser.min.js"></script>
    <script src="https://unpkg.com/georaster/dist/georaster.browserify.min.js"></script>
    <script src="https://unpkg.com/georaster-layer-for-leaflet/dist/georaster-layer-for-leaflet.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>

    <script type="module" src="script.js"></script>
    <script type="module" src="map.js"></script>
    <script type="module" src="options.js"></script>
  </body>
</html>
